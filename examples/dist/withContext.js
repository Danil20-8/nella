!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=7)}({0:function(t,e,n){"use strict";function i(t){if(t){if(t instanceof HTMLElement)return t;if(Array.isArray(t.element)){for(let e=0;e<t.element.length;++e){let n=i(t.element[e]);if(n)return n}return null}return i(t.element)}return null}function r(t){return t?t instanceof HTMLElement?t:Array.isArray(t.element)?r(t.__parent):r(t.element):null}function o(t,e){if(t){if(!e&&t instanceof HTMLElement)return t;{let n=e?t.__nextSibling:t;for(;n;){let t=i(n);if(t)return t;n=n.__nextSibling}let r=t.__parent;for(;r&&Array.isArray(r.element);){let t=o(r.__nextSibling);if(t)return t;r=r.__parent}}}return null}function s(t,...e){e.forEach(e=>{e instanceof HTMLElement?r(t).append(e):Array.isArray(e.element)?e.element.forEach(e=>s(t,e)):e.element&&s(t,e.element)})}function l(t,e,n){e instanceof HTMLElement?r(t).insertBefore(e,o(n)):Array.isArray(e.element)?e.element.forEach(e=>l(t,e,n)):l(t,e.element,n)}function c(t){return t instanceof Function?t():t}function a(t){t.remove instanceof Function?t.remove():Array.isArray(t)?t.forEach(t=>a(t)):t.element&&a(t.element)}n.d(e,"m",(function(){return c})),n.d(e,"a",(function(){return h})),n.d(e,"k",(function(){return f})),n.d(e,"j",(function(){return m})),n.d(e,"h",(function(){return y})),n.d(e,"i",(function(){return b})),n.d(e,"b",(function(){return v})),n.d(e,"l",(function(){return w}));class h{constructor(t,e,n){this.context=e,this.awake(),this.children=n||this.component(e),Array.isArray(this.children)||(this.children=[this.children]);for(let t=0;t<this.children.length;++t){let n=this.children[t];Array.isArray(n)?(this.children.splice(t,1,...n),--t):n instanceof Function?(n=n(e),n?this.children[t]=new h(null,e,n):(this.children.splice(t,1),--t)):n instanceof h||(this.children.splice(t,1),--t)}if(t){t instanceof HTMLElement?(this.element=t,s(this.element,...this.children)):(this.element=document.createElement(t),s(this.element,...this.children)),this.__backedContext=[];let e=Object.keys(this.context);for(let t=0;t<e.length;++t){let n=e[t];n.startsWith("on")?this.element[n]=this.context[n]:n.startsWith("_")||void 0!==this.element[n]&&this.__backedContext.push(()=>{let t=c(this.context[n]);this.element[n]!==t&&(this.element[n]=t)})}this.__applyHtmlContext()}else this.element=this.children;for(let t=0;t<this.children.length;++t){let e=this.children[t];e instanceof h&&(e.__parent=this,e.__nextSibling=this.children[t+1])}}component(t){return[]}__reset(){this.children.forEach(t=>t.__reset()),Array.isArray(this.element)&&this.element.forEach(t=>t.__reset()),this.element instanceof h&&this.element.__reset(),this.__started=!1,this.awake(),this.__applyHtmlContext()}awake(){}__start(){return this.__started=!0,this.start()}start(){}__stop(){this.children.forEach(t=>t.__stop()),Array.isArray(this.element)&&this.element.forEach(t=>t.__stop()),this.stop(),this.__started=!1}stop(){}async update(){this.__started||await this.__start();try{this.__applyHtmlContext(),this.children.forEach(t=>function(t,e){t.update instanceof Function?t.update(e):t.element&&t.element.update instanceof Function&&t.element.update(e)}(t))}catch(t){throw t.componentStack||(t.componentStack=[]),t.componentStack.push(this),t}}__applyHtmlContext(){this.element instanceof HTMLElement&&this.__backedContext.forEach(t=>t())}remove(){this.__started&&this.__stop(),a(this.element)}}function u(t,e,...n){return new h(t,e,n)}class d{constructor(t){this.__pool=[],this.__component=t}push(t){t.__pool&&this.__pool.push(t)}pop(t){let e=this.__pool.pop();if(e)return e.__pool.__context=t,e.__reset(),e;{let n={__context:t};return t&&Object.keys(t).forEach(t=>{Object.defineProperty(n,t,{get:function(){return this.__context[t]},set:function(e){this.__context[t]=e}})}),e=new h(null,n,this.__component(n)),e.__pool=n,e.__remove=e.remove,e.remove=()=>{e.__remove(),this.push(e)},e}}}function p(t,e){return u("input",Object.assign(t,{type:e}))}function f(...t){return void 0!==t[0].items?y({data:()=>t[0].items.filter(t=>c(t.active)).slice(0,t[1]||1),component:t=>(t.createElement||t.component)()}):y({data:()=>t.filter(t=>c(t.active)).slice(0,1),component:t=>t.component()})}function m(...t){return f(...t.map(t=>({active:t.active,component:g(t.component)})))}let _=0;class x extends h{constructor(t){let e=[];super(null,t,e),t.component||(t.component=t.createElement),this.oldData=[],this.elements=e,this.dict={},this.__updateList()}__insertAt(t,e){this.__started&&(t<this.elements.length?l(this.__parent,e,this.elements[t]):l(this.__parent,e,o(this,!0)))}update(){this.__updateList(),super.update()}__updateList(){let t=c(this.context.data),e={},n={};for(let i=0;i<t.length;++i){let r=t[i],o=this.oldData[i],s=r instanceof Object;if(s&&r==o)continue;let l=s?r.__key||(r.__key=++_):r,c=this.dict[l];if(c){if(!s){let t=n[l];if(t&&t.length>=c.length){let t=new h(null,r,this.context.component(r));c.__parent=this,c.push(t),c=t;let e=n[l];e?e.push(c):n[l]=[c]}else{let t=c.shift();c.push(t),c=t;let e=n[l];if(e?e.push(c):n[l]=[c],r==o)continue}}let t=e[l];t&&(s?delete e[l]:t.splice(t.indexOf(c),1)),s&&(n[l]=c)}else if(c=new h(null,r,this.context.component(r)),c.__parent=this,s)this.dict[l]=c;else{let t=this.dict[l];t?t.push(c):this.dict[l]=[c];let e=n[l];e?e.push(c):n[l]=[c]}let a=this.elements[i],u=i+1;for(;u<this.elements.length;++u){let t=this.oldData[u];if(s){if(n[t.__key])continue;break}{let e=n[t];if(e){let t=this.elements[u];if(e.indexOf(t)>-1)continue}break}}if(this.__insertAt(u,c),u-1>0&&(this.elements[u-2].__nextSibling=c),a)if(s)n[o.__key]||(e[o.__key]=a);else{let t=n[o];if(!t||t.indexOf(a)<0){let t=e[o];t?t.push(a):e[o]=[a]}}this.elements[i]=c,this.oldData[i]=r}if(Object.keys(e).forEach(t=>{let n=e[t],i=this.dict[t];Array.isArray(n)?(n.forEach(t=>{a(t),i.splice(i.indexOf(element),1)}),0===i.length&&delete this.dict[t]):(a(n),delete this.dict[t])}),this.oldData.length>t.length){for(let e=t.length;e<this.oldData.length;++e){let t=this.elements[e],i=this.oldData[e],r=i instanceof Object,o=r?i.__key:i;if(!r||!n[i.__key]){{let e=n[i];if(e&&e.indexOf(t)>-1)continue}if(r)delete this.dict[o];else{let e=this.dict[o];e.splice(e.indexOf(t),1),0===e.length&&delete this.dict[o]}a(t)}}this.elements.splice(t.length,this.elements.length),this.oldData.splice(t.length,this.oldData.length),this.elements.length>0&&(this.elements[this.elements.length-1].__nextSibling=null)}}}function y(t){return new x(t)}function b(t){let e=new d(t.component);return y({data:t.data,component:t=>e.pop(t)})}function g(t){let e=new d(t);return()=>e.pop()}class v{constructor(t,e){this.__element=null,this.__mounted=!1,this.__siblingAppContexts=e||[],this.data=t;let n=t=>{Object.keys(t).forEach(e=>{if(e.startsWith("on")){let n=t[e];t[e]=async(...t)=>{let e=n(...t);for(;e instanceof Promise;)e=await e;return this.update(),e}}})};this.div=function(t,...e){return n(t),function(t,...e){return u("div",t,...e)}(t,...e)},this.span=function(t,...e){return n(t),function(t,...e){return u("span",t,...e)}(t,...e)},this.inputText=function(t){return n(t),function(t){return p(t,"text")}(t)},this.select=function(t){return n(t),function(t){let e=t.options;if(delete t.options,e instanceof Function){let t=e,n=[];e=()=>{let e=t();if(n===e)return n;for(let t=0;t<n.length;++t){let i=n[t];if(!e.includes(i)){let t=e.findIndex(t=>t.value===i.value&&t.text===i.text);t>-1&&(e[t]=i)}}}}return u("select",t,b({data:e,component:e=>u("option",{innerText:()=>e.text,value:()=>e.value,selected:()=>e.value===c(t.value)})}))}(t)},this.button=function(t){return n(t),function(t){return u("button",t)}(t)},this.p=function(t,...e){return n(t),function(t,...e){return u("p",t,...e)}(t,...e)},this.label=function(t,...e){return n(t),function(t,...e){return u("label",t,...e)}(t,...e)},this.a=function(t,...e){return n(t),function(t,...e){return u("a",t,...e)}(t,...e)},this.iframe=function(t,...e){return n(t),function(t,...e){let n=u("iframe",t),r=(n.update.bind(n.update),i(n)),o=setInterval(()=>{if(r.contentDocument){clearInterval(o);let i=u(r.contentDocument.body,t,...e);n.update=()=>{i.update()}}},30);return n}(t,...e)},this.mount=this.mount.bind(this),this.component=this.component.bind(this),this.update=this.update.bind(this),this.error=this.error.bind(this)}mount(t,...e){if(this.__mounted)throw new Error("context is already mounted");return this.__element=u(t,{},...e),this.__mounted=!0,this.update(),this.__element}component(t){if(!this.__mounted){let e=t.update;t.update=()=>{this.__mounted||(this.__mounted=!0),t.update=e,t.update()},this.__element=t}return t}update(){let t=Date.now();try{this.__element.update(),this.__siblingAppContexts.forEach(t=>{t.update()})}catch(t){this.error(t)}console.log("update time",Date.now()-t)}error(t){t.componentStack?console.error(t,t.componentStack):console.error(t)}}function w(t,e){return{...e||t,component:t.component,data:t}}},7:function(t,e,n){"use strict";n.r(e);var i=n(0);let r=new i.b,{mount:o,div:s,button:l,select:c,span:a,inputText:h}=r,u={show:!1,listData:[]},d=function(t,e){let{component:n,div:r,span:o,button:s}=Object(i.l)(t,e);class l extends i.a{constructor(t){super(null,t)}component(){return[o({innerText:()=>this.context.title+" "}),o({innerText:()=>this.startTime&&((this.stopTime||Date.now())-this.startTime)/1e3}),Object(i.k)({active:()=>!this.started,component:()=>s({innerText:"start",onclick:()=>{this.started=!0,this.startTime=Date.now(),this.stopTime=0,this.interval=setInterval(()=>{this.update()},30)}})},{active:()=>this.started,component:()=>s({innerText:"stop",onclick:()=>{this.started=!1,clearInterval(this.interval),this.interval=null,this.stopTime=Date.now()}})})]}awake(){this.started=!1,this.interval=null,this.startTime=0,this.stopTime=0}stop(){clearInterval(this.interval)}}return t=>n(new l(t))}(r),p=function(t,e){let{component:n,div:r,button:o}=Object(i.l)(t,e);return function(t){return n(r({},Object(i.k)({active:()=>!Object(i.m)(t.signedIn),component:()=>t.authComponent(t)},{active:()=>Object(i.m)(t.signedIn),component:()=>r({},o({innerText:"signed in!"}))})))}}(r),f=function(t,e){let{component:n,div:r,span:o}=Object(i.l)(t,e);class s extends i.a{constructor(t){super(null,t)}component(){return r({style:()=>this.loaded?"border: solid 2px green; padding: 12px; color: green;":"border: solid 2px red; padding: 12px; color: red"},o({innerText:()=>this.loaded?"Ready to work!":"Loading..."}),r({innerText:()=>this.loaded?"Me too!":"Waiting too..."}),r({},Object(i.h)({data:["1","2","3"],component:t=>r({innerText:()=>t})})))}awake(){this.loaded=!1}async start(){await new Promise(t=>{setTimeout(t,3e3)}),this.loaded=!0}}return t=>n(new s(t))}(r),m=Date.now();o(document.body,p({signedIn:!1,authComponent:function(t){let{div:e,button:n,inputText:i}=t;return function(t){return e({},i({placeholder:"login"}),n({innerText:"sign in",onclick:()=>{t.signedIn=!0}}))}}(r)}),d({title:"static timer"}),f({}),()=>{let t=[];return[()=>{let e="",n="",r=null;return s({style:"display: flex; flex-flow: row wrap; width: 480px"},s({style:"display: flex; flex-flow: column wrap; width: 320px"},r=h({placeholer:"title",style:()=>n?"color: red; border-color: red;":"",value:()=>e,onkeyup:t=>{e=t.target.value,n=""}}),Object(i.k)({active:()=>n,component:()=>a({style:"color: red;",innerText:()=>n})})),l({innerText:"add timer",onclick:()=>{e?(t.push({title:e}),e=""):n="enter title!"}}))},s({style:"display: flex; height: 300px; flex-flow: column wrap; "},Object(i.i)({data:t,component:e=>s({},d(e),l({innerText:"delete",onclick:()=>{t.splice(t.indexOf(e.__context),1)}}))}))]},c({options:[{text:"abc",value:"1"},{text:"qwer",value:"2"}],value:"1",onchange:()=>{}}),Object(i.i)({data:u.listData,component:t=>[s({},[a({innerText:"online",style:"color: green"}),l({innerText:()=>`meet ${t.id}`,onclick:()=>{t.meeted=!0}}),Object(i.j)({active:()=>t.meeted,component:()=>s({style:"border: solid 1px red",innerText:()=>`Hey! I'm a model ${t.id}`})})]),Object(i.j)({active:()=>!t.meeted,component:()=>s({innerText:"meet me!"})})]}),l({innerText:"magic!",onclick:()=>{if(Math.random()>.5){let t=Math.round(Math.random()*u.listData.length);u.listData.splice(t,1)}else u.listData.splice(Math.round(Math.random()*u.listData.length),0,{id:Math.round(50*Math.random()),meeted:!1})}})),console.log(Date.now()-m)}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4uL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy93aXRoQ29udGV4dC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvd2l0aENvbnRleHQvdGltZXJDb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3dpdGhDb250ZXh0L3BhZ2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3dpdGhDb250ZXh0L3Nsb3cuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3dpdGhDb250ZXh0L2F1dGguanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJnZXRFbGVtZW50IiwiY29tcG9uZW50IiwiSFRNTEVsZW1lbnQiLCJBcnJheSIsImlzQXJyYXkiLCJlbGVtZW50IiwibGVuZ3RoIiwiZWwiLCJnZXRQYXJlbnQiLCJfX3BhcmVudCIsImdldE5leHRTaWJsaW5nIiwic2tpcCIsIl9fbmV4dFNpYmxpbmciLCJhcHBlbmQiLCJjaGlsZHJlbiIsImZvckVhY2giLCJlIiwiaW5zZXJ0QmVmb3JlIiwiY2hpbGQiLCJyZWZjaGlsZCIsInZhbCIsIkZ1bmN0aW9uIiwicmVtb3ZlIiwiQ29tcG9uZW50IiwiaHRtbCIsImNvbnRleHQiLCJ0aGlzIiwiYXdha2UiLCJzcGxpY2UiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJfX2JhY2tlZENvbnRleHQiLCJjb250ZXh0S2V5cyIsImtleXMiLCJrIiwic3RhcnRzV2l0aCIsInVuZGVmaW5lZCIsInB1c2giLCJ2IiwiX19hcHBseUh0bWxDb250ZXh0IiwiX19yZXNldCIsIl9fc3RhcnRlZCIsInN0YXJ0IiwiX19zdG9wIiwic3RvcCIsIl9fc3RhcnQiLCJzdGF0ZSIsInVwZGF0ZSIsImNvbXBvbmVudFN0YWNrIiwiQ29tcG9uZW50UG9vbCIsIl9fcG9vbCIsIl9fY29tcG9uZW50IiwicG9wIiwiX19jb250ZXh0IiwicG9vbCIsInNldCIsIl9fcmVtb3ZlIiwiaW5wdXQiLCJ0eXBlIiwiYXNzaWduIiwic3dpdGNoQ29tcG9uZW50IiwiaXRlbXMiLCJsaXN0IiwiZGF0YSIsImZpbHRlciIsImFjdGl2ZSIsInNsaWNlIiwicG9vbFN3aXRjaCIsIm1hcCIsInVzZVBvb2xDb21wb25lbnQiLCJfX2xpc3RDb21wb25lbnRLZXlJbmNyZW1lbnQiLCJMaXN0Q29tcG9uZW50Iiwic3VwZXIiLCJvbGREYXRhIiwiZWxlbWVudHMiLCJkaWN0IiwiX191cGRhdGVMaXN0IiwiaW5kZXgiLCJyZXBsYWNlZCIsImluc2VydGVkIiwibmQiLCJvZCIsImRvT2JqIiwiaXQiLCJzaGlmdCIsImluZGV4T2YiLCJvbGRFbGVtZW50IiwiaW5zZXJ0SW5kZXgiLCJudGhkIiwibnRoZWwiLCJfX2luc2VydEF0IiwicG9vbExpc3QiLCJDb250ZXh0Iiwic2libGluZ0NvbnRleHRzIiwiX19lbGVtZW50IiwiX19tb3VudGVkIiwiX19zaWJsaW5nQXBwQ29udGV4dHMiLCJzZXRIb29rcyIsImhhbmRsZXIiLCJhc3luYyIsImFyZ3MiLCJQcm9taXNlIiwiZGl2Iiwic3BhbiIsImlucHV0VGV4dCIsInNlbGVjdCIsIm9wdGlvbnMiLCJnZXRPcHRpb25zIiwib2xkT3B0aW9ucyIsIm5ld09wdGlvbnMiLCJvbGRPcHRpb24iLCJpbmNsdWRlcyIsIm9sZEluZGV4IiwiZmluZEluZGV4IiwidGV4dCIsImlubmVyVGV4dCIsInNlbGVjdGVkIiwiYnV0dG9uIiwibGFiZWwiLCJhIiwiaWZyYW1lIiwic2V0SW50ZXJ2YWwiLCJjb250ZW50RG9jdW1lbnQiLCJjbGVhckludGVydmFsIiwiZmVsIiwiYm9keSIsIm1vdW50IiwiZXJyb3IiLCJFcnJvciIsImVsZW1lbnRVcGRhdGUiLCJEYXRlIiwibm93IiwiY29uc29sZSIsImxvZyIsInVzZUh0bWxqcyIsImh0bWxqcyIsInBhcmVudEh0bWxqcyIsImFwcERhdGEiLCJzaG93IiwibGlzdERhdGEiLCJ0aW1lckNvbXBvbmVudCIsIlRpbWVyQ29tcG9uZW50IiwidGl0bGUiLCJzdGFydFRpbWUiLCJzdG9wVGltZSIsInN0YXJ0ZWQiLCJvbmNsaWNrIiwiaW50ZXJ2YWwiLCJ1c2VUaW1lckNvbXBvbmVudCIsInBhZ2UiLCJzaWduZWRJbiIsImF1dGhDb21wb25lbnQiLCJ1c2VQYWdlIiwic2xvd0NvbXBvbmVudCIsInBhcmVudENvbnRleHQiLCJTbG93Q29tcG9uZW50Iiwic3R5bGUiLCJsb2FkZWQiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsInVzZVNsb3dDb21wb25lbnQiLCJwbGFjZWhvbGRlciIsInVzZUF1dGhDb21wb25lbnQiLCJ0aW1lcnMiLCJpbnB1dFRpdGxlIiwiaW5wdXRFcnJvciIsInRpbWVyVGl0bGVJbnB1dCIsInBsYWNlaG9sZXIiLCJvbmtleXVwIiwidGFyZ2V0Iiwib25jaGFuZ2UiLCJpZCIsIm1lZXRlZCIsIk1hdGgiLCJyYW5kb20iLCJyb3VuZCJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVB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Q0lxSyxHQUFJRSxLQUFLRSxNQUFzQixHQUFoQkYsS0FBS0MsVUFDcEJGLFFBQVEsUUFPaEN4QyxRQUFRQyxJQUFJSCxLQUFLQyxNQUFRekYiLCJmaWxlIjoid2l0aENvbnRleHQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNyk7XG4iLCJmdW5jdGlvbiBnZXRFbGVtZW50KGNvbXBvbmVudCkge1xuICAgIGlmIChjb21wb25lbnQpIHtcbiAgICAgICAgaWYgKGNvbXBvbmVudCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gY29tcG9uZW50O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoY29tcG9uZW50LmVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb21wb25lbnQuZWxlbWVudC5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZWwgPSBnZXRFbGVtZW50KGNvbXBvbmVudC5lbGVtZW50W2ldKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoZWwpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldEVsZW1lbnQoY29tcG9uZW50LmVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG5mdW5jdGlvbiBnZXRQYXJlbnQoY29tcG9uZW50KSB7XG4gICAgaWYgKGNvbXBvbmVudCkge1xuICAgICAgICBpZiAoY29tcG9uZW50IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBjb21wb25lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShjb21wb25lbnQuZWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0UGFyZW50KGNvbXBvbmVudC5fX3BhcmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0UGFyZW50KGNvbXBvbmVudC5lbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0TmV4dFNpYmxpbmcoY29tcG9uZW50LCBza2lwKSB7XG4gICAgaWYgKGNvbXBvbmVudCkge1xuICAgICAgICBpZiAoIXNraXAgJiYgY29tcG9uZW50IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBjb21wb25lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgcyA9IHNraXAgPyBjb21wb25lbnQuX19uZXh0U2libGluZyA6IGNvbXBvbmVudDtcbiAgICAgICAgICAgIHdoaWxlIChzKSB7XG4gICAgICAgICAgICAgICAgbGV0IGVsID0gZ2V0RWxlbWVudChzKTtcblxuICAgICAgICAgICAgICAgIGlmIChlbClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsO1xuXG4gICAgICAgICAgICAgICAgcyA9IHMuX19uZXh0U2libGluZztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBwID0gY29tcG9uZW50Ll9fcGFyZW50O1xuICAgICAgICAgICAgd2hpbGUgKHAgJiYgQXJyYXkuaXNBcnJheShwLmVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgbGV0IHIgPSBnZXROZXh0U2libGluZyhwLl9fbmV4dFNpYmxpbmcpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByO1xuICAgICAgICAgICAgICAgIHAgPSBwLl9fcGFyZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyppZiAoQXJyYXkuaXNBcnJheShjb21wb25lbnQuX19wYXJlbnQuZWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICBsZXQgciA9IGdldE5leHRTaWJsaW5nKGNvbXBvbmVudC5fX3BhcmVudC5fX25leHRTaWJsaW5nKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcjtcbiAgICAgICAgICAgIH0qL1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuZnVuY3Rpb24gYXBwZW5kKGVsLCAuLi5jaGlsZHJlbikge1xuICAgIGNoaWxkcmVuLmZvckVhY2goYyA9PiB7XG4gICAgICAgIGlmIChjIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgICAgIGdldFBhcmVudChlbCkuYXBwZW5kKGMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYy5lbGVtZW50KSkge1xuICAgICAgICAgICAgICAgIGMuZWxlbWVudC5mb3JFYWNoKGUgPT4gYXBwZW5kKGVsLCBlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjLmVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBhcHBlbmQoZWwsIGMuZWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbmZ1bmN0aW9uIGluc2VydEJlZm9yZShlbCwgY2hpbGQsIHJlZmNoaWxkKSB7XG4gICAgaWYgKGNoaWxkIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgZ2V0UGFyZW50KGVsKS5pbnNlcnRCZWZvcmUoY2hpbGQsIGdldE5leHRTaWJsaW5nKHJlZmNoaWxkKSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShjaGlsZC5lbGVtZW50KSkge1xuICAgICAgICAgICAgY2hpbGQuZWxlbWVudC5mb3JFYWNoKGMgPT4gaW5zZXJ0QmVmb3JlKGVsLCBjLCByZWZjaGlsZCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaW5zZXJ0QmVmb3JlKGVsLCBjaGlsZC5lbGVtZW50LCByZWZjaGlsZCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gdmFsKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgRnVuY3Rpb24gP1xuICAgICAgICB2YWx1ZSgpIDpcbiAgICAgICAgdmFsdWU7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZShjb21wb25lbnQsIHN0YXRlKSB7XG4gICAgaWYgKGNvbXBvbmVudC51cGRhdGUgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xuICAgICAgICBjb21wb25lbnQudXBkYXRlKHN0YXRlKTtcbiAgICB9IGVsc2UgaWYgKGNvbXBvbmVudC5lbGVtZW50ICYmIGNvbXBvbmVudC5lbGVtZW50LnVwZGF0ZSBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XG4gICAgICAgIGNvbXBvbmVudC5lbGVtZW50LnVwZGF0ZShzdGF0ZSk7XG4gICAgfVxufVxuZnVuY3Rpb24gcmVtb3ZlKGNvbXBvbmVudCkge1xuICAgIGlmIChjb21wb25lbnQucmVtb3ZlIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcbiAgICAgICAgY29tcG9uZW50LnJlbW92ZSgpO1xuICAgIH1cbiAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KGNvbXBvbmVudCkpIHtcbiAgICAgICAgY29tcG9uZW50LmZvckVhY2goYyA9PiByZW1vdmUoYykpO1xuICAgIH1cbiAgICBlbHNlIGlmIChjb21wb25lbnQuZWxlbWVudCkge1xuICAgICAgICByZW1vdmUoY29tcG9uZW50LmVsZW1lbnQpO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIENvbXBvbmVudCB7XG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHBhcmFtIHsqfSBodG1sIFxuICAgICAqIEBwYXJhbSB7Kn0gY29udGV4dCBcbiAgICAgKiBAcGFyYW0ge0NvbXBvbmVudFtdfSBjaGlsZHJlbiBcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihodG1sLCBjb250ZXh0LCBjaGlsZHJlbikge1xuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICB0aGlzLmF3YWtlKCk7XG5cbiAgICAgICAgdGhpcy5jaGlsZHJlbiA9IGNoaWxkcmVuIHx8IHRoaXMuY29tcG9uZW50KGNvbnRleHQpO1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkodGhpcy5jaGlsZHJlbikpIHtcbiAgICAgICAgICAgIHRoaXMuY2hpbGRyZW4gPSBbdGhpcy5jaGlsZHJlbl07XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBsZXQgYyA9IHRoaXMuY2hpbGRyZW5baV07XG5cbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGMpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGlsZHJlbi5zcGxpY2UoaSwgMSwgLi4uYyk7XG4gICAgICAgICAgICAgICAgLS1pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoYyBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XG4gICAgICAgICAgICAgICAgYyA9IGMoY29udGV4dCk7XG4gICAgICAgICAgICAgICAgaWYgKGMpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hpbGRyZW5baV0gPSBuZXcgQ29tcG9uZW50KG51bGwsIGNvbnRleHQsIGMpO1xuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoaWxkcmVuLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgLS1pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCEoYyBpbnN0YW5jZW9mIENvbXBvbmVudCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNoaWxkcmVuLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICAtLWk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaHRtbCkge1xuICAgICAgICAgICAgaWYgKGh0bWwgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IGh0bWw7XG4gICAgICAgICAgICAgICAgYXBwZW5kKHRoaXMuZWxlbWVudCwgLi4udGhpcy5jaGlsZHJlbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGh0bWwpO1xuICAgICAgICAgICAgICAgIGFwcGVuZCh0aGlzLmVsZW1lbnQsIC4uLnRoaXMuY2hpbGRyZW4pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLl9fYmFja2VkQ29udGV4dCA9IFtdO1xuICAgICAgICAgICAgbGV0IGNvbnRleHRLZXlzID0gT2JqZWN0LmtleXModGhpcy5jb250ZXh0KTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29udGV4dEtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICBsZXQgayA9IGNvbnRleHRLZXlzW2ldO1xuICAgICAgICAgICAgICAgIGlmIChrLnN0YXJ0c1dpdGgoXCJvblwiKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnRba10gPSB0aGlzLmNvbnRleHRba107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFrLnN0YXJ0c1dpdGgoXCJfXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnRba10gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fX2JhY2tlZENvbnRleHQucHVzaCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHYgPSB2YWwodGhpcy5jb250ZXh0W2tdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50W2tdICE9PSB2KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnRba10gPSB2O1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuX19hcHBseUh0bWxDb250ZXh0KCk7XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IHRoaXMuY2hpbGRyZW47XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGxldCBjID0gdGhpcy5jaGlsZHJlbltpXTtcblxuICAgICAgICAgICAgaWYgKGMgaW5zdGFuY2VvZiBDb21wb25lbnQpIHtcbiAgICAgICAgICAgICAgICBjLl9fcGFyZW50ID0gdGhpcztcbiAgICAgICAgICAgICAgICBjLl9fbmV4dFNpYmxpbmcgPSB0aGlzLmNoaWxkcmVuW2kgKyAxXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyB7IENvbXBvbmVudFtdIH1cbiAgICAgKi9cbiAgICBjb21wb25lbnQoY29udGV4dCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIF9fcmVzZXQoKSB7XG4gICAgICAgIHRoaXMuY2hpbGRyZW4uZm9yRWFjaChjID0+IGMuX19yZXNldCgpKTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodGhpcy5lbGVtZW50KSkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmZvckVhY2goZSA9PiBlLl9fcmVzZXQoKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudCBpbnN0YW5jZW9mIENvbXBvbmVudClcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5fX3Jlc2V0KCk7XG5cbiAgICAgICAgdGhpcy5fX3N0YXJ0ZWQgPSBmYWxzZTtcblxuICAgICAgICB0aGlzLmF3YWtlKCk7XG5cbiAgICAgICAgdGhpcy5fX2FwcGx5SHRtbENvbnRleHQoKTtcbiAgICB9XG4gICAgYXdha2UoKSB7XG5cbiAgICB9XG4gICAgX19zdGFydCgpIHtcbiAgICAgICAgdGhpcy5fX3N0YXJ0ZWQgPSB0cnVlO1xuXG4gICAgICAgIHJldHVybiB0aGlzLnN0YXJ0KCk7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgIH1cbiAgICBfX3N0b3AoKSB7XG4gICAgICAgIHRoaXMuY2hpbGRyZW4uZm9yRWFjaChjID0+IGMuX19zdG9wKCkpO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0aGlzLmVsZW1lbnQpKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuZm9yRWFjaChlID0+IGUuX19zdG9wKCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zdG9wKCk7XG4gICAgICAgIHRoaXMuX19zdGFydGVkID0gZmFsc2U7XG4gICAgfVxuICAgIHN0b3AoKSB7XG4gICAgfVxuICAgIGFzeW5jIHVwZGF0ZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9fc3RhcnRlZCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5fX3N0YXJ0KCk7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuX19hcHBseUh0bWxDb250ZXh0KCk7XG5cbiAgICAgICAgICAgIHRoaXMuY2hpbGRyZW4uZm9yRWFjaChjID0+IHVwZGF0ZShjKSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGlmICghZS5jb21wb25lbnRTdGFjaylcbiAgICAgICAgICAgICAgICBlLmNvbXBvbmVudFN0YWNrID0gW107XG4gICAgICAgICAgICBlLmNvbXBvbmVudFN0YWNrLnB1c2godGhpcyk7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9fYXBwbHlIdG1sQ29udGV4dCgpIHtcbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLl9fYmFja2VkQ29udGV4dC5mb3JFYWNoKGMgPT4gYygpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZW1vdmUoKSB7XG4gICAgICAgIGlmICh0aGlzLl9fc3RhcnRlZClcbiAgICAgICAgICAgIHRoaXMuX19zdG9wKCk7XG5cbiAgICAgICAgcmVtb3ZlKHRoaXMuZWxlbWVudCk7XG4gICAgfVxufVxuZnVuY3Rpb24gY29tcG9uZW50KG5hbWUsIGNvbnRleHQsIC4uLmNoaWxkcmVuKSB7XG4gICAgcmV0dXJuIG5ldyBDb21wb25lbnQobmFtZSwgY29udGV4dCwgY2hpbGRyZW4pO1xufVxuXG5jbGFzcyBDb21wb25lbnRQb29sIHtcbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0geyhwb29sOiB7IGNvbnRleHQ6IGFueSB9KSA9PiBDb21wb25lbnR9IGNvbXBvbmVudCBcblxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGNvbXBvbmVudCkge1xuICAgICAgICB0aGlzLl9fcG9vbCA9IFtdO1xuICAgICAgICB0aGlzLl9fY29tcG9uZW50ID0gY29tcG9uZW50O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge0NvbXBvbmVudH0gZWxlbWVudCBcbiAgICAgKi9cbiAgICBwdXNoKGVsZW1lbnQpIHtcbiAgICAgICAgaWYgKGVsZW1lbnQuX19wb29sKSB7XG4gICAgICAgICAgICB0aGlzLl9fcG9vbC5wdXNoKGVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHBvcChjb250ZXh0KSB7XG4gICAgICAgIGxldCBlbGVtZW50ID0gdGhpcy5fX3Bvb2wucG9wKCk7XG4gICAgICAgIGlmIChlbGVtZW50KSB7XG4gICAgICAgICAgICBlbGVtZW50Ll9fcG9vbC5fX2NvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICAgICAgZWxlbWVudC5fX3Jlc2V0KCk7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCBwb29sID0geyBfX2NvbnRleHQ6IGNvbnRleHQgfTtcbiAgICAgICAgICAgIGlmIChjb250ZXh0KVxuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKGNvbnRleHQpLmZvckVhY2goayA9PiB7XG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwb29sLCBrLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuX19jb250ZXh0W2tdOyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHsgdGhpcy5fX2NvbnRleHRba10gPSB2YWx1ZTsgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZWxlbWVudCA9IG5ldyBDb21wb25lbnQobnVsbCwgcG9vbCwgdGhpcy5fX2NvbXBvbmVudChwb29sKSk7XG4gICAgICAgICAgICBlbGVtZW50Ll9fcG9vbCA9IHBvb2w7XG4gICAgICAgICAgICBlbGVtZW50Ll9fcmVtb3ZlID0gZWxlbWVudC5yZW1vdmU7XG4gICAgICAgICAgICBlbGVtZW50LnJlbW92ZSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBlbGVtZW50Ll9fcmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wdXNoKGVsZW1lbnQpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBcbiAqIEBwYXJhbSB7Kn0gY29udGV4dCBcbiAqIEBwYXJhbSAgey4uLkNvbXBvbmVudH0gY2hpbGRyZW4gXG4gKi9cbmZ1bmN0aW9uIGRpdihjb250ZXh0LCAuLi5jaGlsZHJlbikge1xuICAgIHJldHVybiBjb21wb25lbnQoXCJkaXZcIiwgY29udGV4dCwgLi4uY2hpbGRyZW4pXG59XG5mdW5jdGlvbiBzcGFuKGNvbnRleHQsIC4uLmNoaWxkcmVuKSB7XG4gICAgcmV0dXJuIGNvbXBvbmVudChcInNwYW5cIiwgY29udGV4dCwgLi4uY2hpbGRyZW4pO1xufVxuZnVuY3Rpb24gaW5wdXQoY29udGV4dCwgdHlwZSkge1xuICAgIHJldHVybiBjb21wb25lbnQoXCJpbnB1dFwiLCBPYmplY3QuYXNzaWduKGNvbnRleHQsIHsgdHlwZTogdHlwZSB9KSk7XG59XG5mdW5jdGlvbiBpbnB1dFRleHQoY29udGV4dCkge1xuICAgIHJldHVybiBpbnB1dChjb250ZXh0LCBcInRleHRcIik7XG59XG5mdW5jdGlvbiBpbnB1dFN1Ym1pdChjb250ZXh0KSB7XG4gICAgcmV0dXJuIGlucHV0KGNvbnRleHQsIFwic3VibWl0XCIpO1xufVxuZnVuY3Rpb24gY2hlY2tib3goY29udGV4dCkge1xuICAgIHJldHVybiBpbnB1dChjb250ZXh0LCBcImNoZWNrYm94XCIpO1xufVxuZnVuY3Rpb24gcmFkaW8oY29udGV4dCkge1xuICAgIHJldHVybiBpbnB1dChjb250ZXh0LCBcInJhZGlvXCIpO1xufVxuZnVuY3Rpb24gbGFiZWwoY29udGV4dCwgLi4uY2hpbGRyZW4pIHtcbiAgICByZXR1cm4gY29tcG9uZW50KFwibGFiZWxcIiwgY29udGV4dCwgLi4uY2hpbGRyZW4pO1xufVxuZnVuY3Rpb24gYShjb250ZXh0LCAuLi5jaGlsZHJlbikge1xuICAgIHJldHVybiBjb21wb25lbnQoXCJhXCIsIGNvbnRleHQsIC4uLmNoaWxkcmVuKTtcbn1cblxuZnVuY3Rpb24gcChjb250ZXh0LCAuLi5jaGlsZHJlbikge1xuICAgIHJldHVybiBjb21wb25lbnQoXCJwXCIsIGNvbnRleHQsIC4uLmNoaWxkcmVuKTtcbn1cbmZ1bmN0aW9uIGJ1dHRvbihjb250ZXh0KSB7XG4gICAgcmV0dXJuIGNvbXBvbmVudChcImJ1dHRvblwiLCBjb250ZXh0KTtcbn1cblxuZnVuY3Rpb24gc2VsZWN0KGNvbnRleHQpIHtcbiAgICBsZXQgb3B0aW9ucyA9IGNvbnRleHQub3B0aW9ucztcbiAgICBkZWxldGUgY29udGV4dC5vcHRpb25zO1xuICAgIGlmIChvcHRpb25zIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcbiAgICAgICAgbGV0IGdldE9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICBsZXQgb2xkT3B0aW9ucyA9IFtdO1xuICAgICAgICBvcHRpb25zID0gKCkgPT4ge1xuICAgICAgICAgICAgbGV0IG5ld09wdGlvbnMgPSBnZXRPcHRpb25zKCk7XG4gICAgICAgICAgICBpZiAob2xkT3B0aW9ucyA9PT0gbmV3T3B0aW9ucykge1xuICAgICAgICAgICAgICAgIHJldHVybiBvbGRPcHRpb25zO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9sZE9wdGlvbnMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICBsZXQgb2xkT3B0aW9uID0gb2xkT3B0aW9uc1tpXTtcbiAgICAgICAgICAgICAgICBpZiAoIW5ld09wdGlvbnMuaW5jbHVkZXMob2xkT3B0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgb2xkSW5kZXggPSBuZXdPcHRpb25zLmZpbmRJbmRleCgoZSkgPT4gZS52YWx1ZSA9PT0gb2xkT3B0aW9uLnZhbHVlICYmIGUudGV4dCA9PT0gb2xkT3B0aW9uLnRleHQpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChvbGRJbmRleCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdPcHRpb25zW29sZEluZGV4XSA9IG9sZE9wdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbXBvbmVudChcInNlbGVjdFwiLCBjb250ZXh0LFxuICAgICAgICBwb29sTGlzdCh7XG4gICAgICAgICAgICBkYXRhOiBvcHRpb25zLFxuICAgICAgICAgICAgY29tcG9uZW50OiAoZGF0YSkgPT4gY29tcG9uZW50KFwib3B0aW9uXCIsIHtcbiAgICAgICAgICAgICAgICBpbm5lclRleHQ6ICgpID0+IGRhdGEudGV4dCxcbiAgICAgICAgICAgICAgICB2YWx1ZTogKCkgPT4gZGF0YS52YWx1ZSxcbiAgICAgICAgICAgICAgICBzZWxlY3RlZDogKCkgPT4gZGF0YS52YWx1ZSA9PT0gdmFsKGNvbnRleHQudmFsdWUpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICk7XG59XG5cbmZ1bmN0aW9uIGlmcmFtZShjb250ZXh0LCAuLi5jaGlsZHJlbikge1xuICAgIGxldCBlID0gY29tcG9uZW50KFwiaWZyYW1lXCIsIGNvbnRleHQpO1xuICAgIGxldCBjb21wb25lbnRVcGRhdGUgPSBlLnVwZGF0ZS5iaW5kKGUudXBkYXRlKTtcbiAgICBsZXQgZWwgPSBnZXRFbGVtZW50KGUpO1xuICAgIGxldCBpdCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgaWYgKGVsLmNvbnRlbnREb2N1bWVudCkge1xuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpdCk7XG4gICAgICAgICAgICBsZXQgZmVsID0gY29tcG9uZW50KGVsLmNvbnRlbnREb2N1bWVudC5ib2R5LCBjb250ZXh0LCAuLi5jaGlsZHJlbik7XG4gICAgICAgICAgICBlLnVwZGF0ZSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAvL2NvbXBvbmVudFVwZGF0ZSgpO1xuXG4gICAgICAgICAgICAgICAgZmVsLnVwZGF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwgMzApO1xuICAgIHJldHVybiBlO1xufVxuLyoqXG4gKiBcbiAqIEBwYXJhbSB7eyBpdGVtczogeyBhY3RpdmU6IGJvb2xlYW4sIGNyZWF0ZUVsZW1lbnQ/OiAoKSA9PiBDb21wb25lbnQsIGNvbXBvbmVudDogKCkgPT4gQ29tcG9uZW50IH1bXSB9fSBjb250ZXh0IFxuICogQHBhcmFtIHtudW1iZXJ9IGxpbWl0IFxuICovXG4vKmV4cG9ydCBmdW5jdGlvbiBzd2l0Y2hDb21wb25lbnQoY29udGV4dCwgbGltaXQgPSAxKSB7XG4gICAgcmV0dXJuIGxpc3RDb21wb25lbnQoe1xuICAgICAgICBkYXRhOiAoKSA9PiB2YWwoY29udGV4dC5pdGVtcykuZmlsdGVyKGkgPT4gdmFsKGkuYWN0aXZlKSkuc2xpY2UoMCwgbGltaXQpLFxuICAgICAgICBjb21wb25lbnQ6IChpKSA9PiAoaS5jcmVhdGVFbGVtZW50IHx8IGkuY29tcG9uZW50KSgpXG4gICAgfSk7XG59Ki9cbi8qKlxuICogXG4gKiBAcGFyYW0gIHsuLi57IGFjdGl2ZTogKCgpID0+IGJvb2xlYW4pIHwgYm9vbGVhbiwgY29tcG9uZW50OiAoKSA9PiBDb21wb25lbnQgfX0gaXRlbXMgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzd2l0Y2hDb21wb25lbnQoLi4uaXRlbXMpIHtcbiAgICBpZiAoaXRlbXNbMF0uaXRlbXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gbGlzdCh7XG4gICAgICAgICAgICBkYXRhOiAoKSA9PiBpdGVtc1swXS5pdGVtcy5maWx0ZXIoaSA9PiB2YWwoaS5hY3RpdmUpKS5zbGljZSgwLCBpdGVtc1sxXSB8fCAxKSxcbiAgICAgICAgICAgIGNvbXBvbmVudDogKGkpID0+IChpLmNyZWF0ZUVsZW1lbnQgfHwgaS5jb21wb25lbnQpKClcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBsaXN0KHtcbiAgICAgICAgZGF0YTogKCkgPT4gaXRlbXMuZmlsdGVyKGkgPT4gdmFsKGkuYWN0aXZlKSkuc2xpY2UoMCwgMSksXG4gICAgICAgIGNvbXBvbmVudDogKGkpID0+IGkuY29tcG9uZW50KClcbiAgICB9KTtcbn1cbi8qKlxuICogXG4gKiBAcGFyYW0gIHsuLi57IGFjdGl2ZTogKCgpID0+IGJvb2xlYW4pIHwgYm9vbGVhbiwgY29tcG9uZW50OiAoKSA9PiBDb21wb25lbnQgfX0gaXRlbXMgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwb29sU3dpdGNoKC4uLml0ZW1zKSB7XG4gICAgcmV0dXJuIHN3aXRjaENvbXBvbmVudChcbiAgICAgICAgLi4uaXRlbXMubWFwKGkgPT4geyByZXR1cm4geyBhY3RpdmU6IGkuYWN0aXZlLCBjb21wb25lbnQ6IHVzZVBvb2xDb21wb25lbnQoaS5jb21wb25lbnQpIH07IH0pXG4gICAgKVxufVxubGV0IF9fbGlzdENvbXBvbmVudEtleUluY3JlbWVudCA9IDA7XG5jbGFzcyBMaXN0Q29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge3sgZGF0YTogYW55W10sIGNyZWF0ZUVsZW1lbnQ/OiAoZGF0YTogYW55KSA9PiBDb21wb25lbnQsIGNvbXBvbmVudDogKGRhdGE6IGFueSkgPT4gQ29tcG9uZW50IH19IGNvbnRleHQgXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoY29udGV4dCkge1xuICAgICAgICBsZXQgY2hpbGRyZW4gPSBbXTtcbiAgICAgICAgc3VwZXIobnVsbCwgY29udGV4dCwgY2hpbGRyZW4pO1xuXG4gICAgICAgIGlmICghY29udGV4dC5jb21wb25lbnQpXG4gICAgICAgICAgICBjb250ZXh0LmNvbXBvbmVudCA9IGNvbnRleHQuY3JlYXRlRWxlbWVudDtcblxuICAgICAgICB0aGlzLm9sZERhdGEgPSBbXTtcbiAgICAgICAgdGhpcy5lbGVtZW50cyA9IGNoaWxkcmVuO1xuICAgICAgICB0aGlzLmRpY3QgPSB7fTtcblxuICAgICAgICB0aGlzLl9fdXBkYXRlTGlzdCgpO1xuICAgIH1cbiAgICBfX2luc2VydEF0KGluZGV4LCBlbGVtZW50KSB7XG4gICAgICAgIGlmICh0aGlzLl9fc3RhcnRlZCkge1xuICAgICAgICAgICAgaWYgKGluZGV4IDwgdGhpcy5lbGVtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBpbnNlcnRCZWZvcmUodGhpcy5fX3BhcmVudCwgZWxlbWVudCwgdGhpcy5lbGVtZW50c1tpbmRleF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaW5zZXJ0QmVmb3JlKHRoaXMuX19wYXJlbnQsIGVsZW1lbnQsIGdldE5leHRTaWJsaW5nKHRoaXMsIHRydWUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIHRoaXMuX191cGRhdGVMaXN0KCk7XG5cbiAgICAgICAgc3VwZXIudXBkYXRlKCk7XG4gICAgfVxuICAgIF9fdXBkYXRlTGlzdCgpIHtcbiAgICAgICAgbGV0IGRhdGEgPSB2YWwodGhpcy5jb250ZXh0LmRhdGEpO1xuXG4gICAgICAgIGxldCByZXBsYWNlZCA9IHt9O1xuICAgICAgICBsZXQgaW5zZXJ0ZWQgPSB7fTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGxldCBuZCA9IGRhdGFbaV07XG4gICAgICAgICAgICBsZXQgb2QgPSB0aGlzLm9sZERhdGFbaV07XG5cbiAgICAgICAgICAgIGxldCBkb09iaiA9IG5kIGluc3RhbmNlb2YgT2JqZWN0O1xuXG4gICAgICAgICAgICBpZiAoZG9PYmogJiYgbmQgPT0gb2QpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG5cbiAgICAgICAgICAgIGxldCBrZXkgPSBkb09iaiA/XG4gICAgICAgICAgICAgICAgbmRbXCJfX2tleVwiXSB8fCAobmRbXCJfX2tleVwiXSA9ICsrX19saXN0Q29tcG9uZW50S2V5SW5jcmVtZW50KSA6XG4gICAgICAgICAgICAgICAgbmQ7XG5cbiAgICAgICAgICAgIGxldCBlbGVtZW50ID0gdGhpcy5kaWN0W2tleV07XG5cbiAgICAgICAgICAgIGlmICghZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQgPSBuZXcgQ29tcG9uZW50KG51bGwsIG5kLCB0aGlzLmNvbnRleHQuY29tcG9uZW50KG5kKSk7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5fX3BhcmVudCA9IHRoaXM7XG5cbiAgICAgICAgICAgICAgICBpZiAoZG9PYmopIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaWN0W2tleV0gPSBlbGVtZW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGQgPSB0aGlzLmRpY3Rba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGQucHVzaChlbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGljdFtrZXldID0gW2VsZW1lbnRdO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgbGV0IGl0ID0gaW5zZXJ0ZWRba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGl0KVxuICAgICAgICAgICAgICAgICAgICAgICAgaXQucHVzaChlbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgaW5zZXJ0ZWRba2V5XSA9IFtlbGVtZW50XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoIWRvT2JqKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBpdCA9IGluc2VydGVkW2tleV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChpdCAmJiBpdC5sZW5ndGggPj0gZWxlbWVudC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBlbCA9IG5ldyBDb21wb25lbnQobnVsbCwgbmQsIHRoaXMuY29udGV4dC5jb21wb25lbnQobmQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuX19wYXJlbnQgPSB0aGlzO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnB1c2goZWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudCA9IGVsO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaXQgPSBpbnNlcnRlZFtrZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0LnB1c2goZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zZXJ0ZWRba2V5XSA9IFtlbGVtZW50XTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBlID0gZWxlbWVudC5zaGlmdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5wdXNoKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudCA9IGU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpdCA9IGluc2VydGVkW2tleV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXQucHVzaChlbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnNlcnRlZFtrZXldID0gW2VsZW1lbnRdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmQgPT0gb2QpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBsZXQgdCA9IHJlcGxhY2VkW2tleV07XG4gICAgICAgICAgICAgICAgaWYgKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFkb09iaikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdC5zcGxpY2UodC5pbmRleE9mKGVsZW1lbnQpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSByZXBsYWNlZFtrZXldO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGRvT2JqKSB7XG4gICAgICAgICAgICAgICAgICAgIGluc2VydGVkW2tleV0gPSBlbGVtZW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IG9sZEVsZW1lbnQgPSB0aGlzLmVsZW1lbnRzW2ldO1xuXG4gICAgICAgICAgICBsZXQgaW5zZXJ0SW5kZXggPSBpICsgMTtcbiAgICAgICAgICAgIGZvciAoOyBpbnNlcnRJbmRleCA8IHRoaXMuZWxlbWVudHMubGVuZ3RoOyArK2luc2VydEluZGV4KSB7XG4gICAgICAgICAgICAgICAgbGV0IG50aGQgPSB0aGlzLm9sZERhdGFbaW5zZXJ0SW5kZXhdO1xuXG4gICAgICAgICAgICAgICAgaWYgKGRvT2JqKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnNlcnRlZFtudGhkW1wiX19rZXlcIl1dKVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGl0ID0gaW5zZXJ0ZWRbbnRoZF07XG4gICAgICAgICAgICAgICAgICAgIGlmIChpdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG50aGVsID0gdGhpcy5lbGVtZW50c1tpbnNlcnRJbmRleF07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXQuaW5kZXhPZihudGhlbCkgPiAtMSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuX19pbnNlcnRBdChpbnNlcnRJbmRleCwgZWxlbWVudCk7XG4gICAgICAgICAgICAvL2luc2VydEJlZm9yZSh0aGlzLl9fcGFyZW50LCBlbGVtZW50LCB0aGlzLmVsZW1lbnRzW2luc2VydEluZGV4XSk7XG5cbiAgICAgICAgICAgIC8qaWYgKGluc2VydEluZGV4IDwgdGhpcy5lbGVtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBpbnNlcnRCZWZvcmUodGhpcy5fX3BhcmVudCwgZWxlbWVudCwgdGhpcy5lbGVtZW50c1tpbnNlcnRJbmRleF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhpbnNlcnRJbmRleCwgbmQsIHRoaXMsIGdldE5leHRTaWJsaW5nKHRoaXMsIHRydWUpKTtcblxuICAgICAgICAgICAgICAgIGluc2VydEJlZm9yZSh0aGlzLl9fcGFyZW50LCBlbGVtZW50LCBnZXROZXh0U2libGluZyh0aGlzLCB0cnVlKSk7XG4gICAgICAgICAgICB9Ki9cblxuICAgICAgICAgICAgaWYgKGluc2VydEluZGV4IC0gMSA+IDApXG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50c1tpbnNlcnRJbmRleCAtIDJdLl9fbmV4dFNpYmxpbmcgPSBlbGVtZW50O1xuXG4gICAgICAgICAgICBpZiAob2xkRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGlmIChkb09iaikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWluc2VydGVkW29kW1wiX19rZXlcIl1dKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVwbGFjZWRbb2RbXCJfX2tleVwiXV0gPSBvbGRFbGVtZW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGl0ID0gaW5zZXJ0ZWRbb2RdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWl0IHx8IGl0LmluZGV4T2Yob2xkRWxlbWVudCkgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdCA9IHJlcGxhY2VkW29kXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQucHVzaChvbGRFbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBsYWNlZFtvZF0gPSBbb2xkRWxlbWVudF07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRzW2ldID0gZWxlbWVudDtcbiAgICAgICAgICAgIHRoaXMub2xkRGF0YVtpXSA9IG5kO1xuICAgICAgICB9XG5cbiAgICAgICAgT2JqZWN0LmtleXMocmVwbGFjZWQpXG4gICAgICAgICAgICAuZm9yRWFjaChrID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgdCA9IHJlcGxhY2VkW2tdO1xuICAgICAgICAgICAgICAgIGxldCBkID0gdGhpcy5kaWN0W2tdO1xuICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHQuZm9yRWFjaChlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZShlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGQuc3BsaWNlKGQuaW5kZXhPZihlbGVtZW50KSwgMSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoZC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmRpY3Rba107XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZSh0KTtcblxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5kaWN0W2tdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIGlmICh0aGlzLm9sZERhdGEubGVuZ3RoID4gZGF0YS5sZW5ndGgpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBkYXRhLmxlbmd0aDsgaSA8IHRoaXMub2xkRGF0YS5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIGxldCBlbCA9IHRoaXMuZWxlbWVudHNbaV07XG4gICAgICAgICAgICAgICAgbGV0IG9kID0gdGhpcy5vbGREYXRhW2ldO1xuXG4gICAgICAgICAgICAgICAgbGV0IGRvT2JqID0gb2QgaW5zdGFuY2VvZiBPYmplY3RcbiAgICAgICAgICAgICAgICBsZXQgayA9IGRvT2JqID9cbiAgICAgICAgICAgICAgICAgICAgb2RbXCJfX2tleVwiXSA6XG4gICAgICAgICAgICAgICAgICAgIG9kO1xuXG4gICAgICAgICAgICAgICAgaWYgKGRvT2JqICYmIGluc2VydGVkW29kW1wiX19rZXlcIl1dKVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGl0ID0gaW5zZXJ0ZWRbb2RdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXQgJiYgaXQuaW5kZXhPZihlbCkgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgIGlmIChkb09iaikge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5kaWN0W2tdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGQgPSB0aGlzLmRpY3Rba107XG4gICAgICAgICAgICAgICAgICAgIGQuc3BsaWNlKGQuaW5kZXhPZihlbCksIDEpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmRpY3Rba107XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVtb3ZlKGVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZWxlbWVudHMuc3BsaWNlKGRhdGEubGVuZ3RoLCB0aGlzLmVsZW1lbnRzLmxlbmd0aCk7XG4gICAgICAgICAgICB0aGlzLm9sZERhdGEuc3BsaWNlKGRhdGEubGVuZ3RoLCB0aGlzLm9sZERhdGEubGVuZ3RoKTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudHMubGVuZ3RoID4gMClcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnRzW3RoaXMuZWxlbWVudHMubGVuZ3RoIC0gMV0uX19uZXh0U2libGluZyA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIFxuICogQHBhcmFtIHt7IGRhdGE6IFRbXSwgY3JlYXRlRWxlbWVudD86IChkYXRhOiBUKSA9PiBDb21wb25lbnQsIGNvbXBvbmVudDogKGRhdGE6IFQpID0+IENvbXBvbmVudCB9fSBjb250ZXh0IFxuICovXG5leHBvcnQgZnVuY3Rpb24gbGlzdChjb250ZXh0KSB7XG4gICAgcmV0dXJuIG5ldyBMaXN0Q29tcG9uZW50KGNvbnRleHQpO1xufVxuLyoqXG4gKiBcbiAqIEBwYXJhbSB7eyBkYXRhOiBUW10sIGNvbXBvbmVudDogKHBvb2w6IHsgY29udGV4dDogVCB9KSA9PiBDb21wb25lbnR9fSBjb250ZXh0IFxuICovXG5leHBvcnQgZnVuY3Rpb24gcG9vbExpc3QoY29udGV4dCkge1xuICAgIGxldCBwb29sID0gbmV3IENvbXBvbmVudFBvb2woY29udGV4dC5jb21wb25lbnQpO1xuICAgIHJldHVybiBsaXN0KHtcbiAgICAgICAgZGF0YTogY29udGV4dC5kYXRhLFxuICAgICAgICBjb21wb25lbnQ6IChkYXRhKSA9PiBwb29sLnBvcChkYXRhKVxuICAgIH0pO1xufVxuLyoqXG4gKiBcbiAqIEBwYXJhbSB7KCkgPT4gQ29tcG9uZW50fSBjb21wb25lbnQgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VQb29sQ29tcG9uZW50KGNvbXBvbmVudCkge1xuICAgIGxldCBwb29sID0gbmV3IENvbXBvbmVudFBvb2woY29tcG9uZW50KTtcbiAgICByZXR1cm4gKCkgPT4gcG9vbC5wb3AoKTtcbn1cblxuZXhwb3J0IGNsYXNzIENvbnRleHQge1xuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSAge0NvbnRleHRbXX0gc2libGluZ0NvbnRleHRzIFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGRhdGEsIHNpYmxpbmdDb250ZXh0cykge1xuICAgICAgICB0aGlzLl9fZWxlbWVudCA9IG51bGw7XG4gICAgICAgIHRoaXMuX19tb3VudGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX19zaWJsaW5nQXBwQ29udGV4dHMgPSBzaWJsaW5nQ29udGV4dHMgfHwgW107XG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgICAgIGxldCBzZXRIb29rcyA9IChjb250ZXh0KSA9PiB7XG4gICAgICAgICAgICBPYmplY3Qua2V5cyhjb250ZXh0KS5mb3JFYWNoKGsgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChrLnN0YXJ0c1dpdGgoXCJvblwiKSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgaGFuZGxlciA9IGNvbnRleHRba107XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHRba10gPSBhc3luYyAoLi4uYXJncykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHIgPSBoYW5kbGVyKC4uLmFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHIgaW5zdGFuY2VvZiBQcm9taXNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBhd2FpdCByO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmRpdiA9IGZ1bmN0aW9uIChjb250ZXh0LCAuLi5jaGlsZHJlbikge1xuICAgICAgICAgICAgc2V0SG9va3MoY29udGV4dCk7XG4gICAgICAgICAgICByZXR1cm4gZGl2KGNvbnRleHQsIC4uLmNoaWxkcmVuKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zcGFuID0gZnVuY3Rpb24gKGNvbnRleHQsIC4uLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICBzZXRIb29rcyhjb250ZXh0KTtcbiAgICAgICAgICAgIHJldHVybiBzcGFuKGNvbnRleHQsIC4uLmNoaWxkcmVuKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5pbnB1dFRleHQgPSBmdW5jdGlvbiAoY29udGV4dCkge1xuICAgICAgICAgICAgc2V0SG9va3MoY29udGV4dCk7XG4gICAgICAgICAgICByZXR1cm4gaW5wdXRUZXh0KGNvbnRleHQpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNlbGVjdCA9IGZ1bmN0aW9uIChjb250ZXh0KSB7XG4gICAgICAgICAgICBzZXRIb29rcyhjb250ZXh0KTtcbiAgICAgICAgICAgIHJldHVybiBzZWxlY3QoY29udGV4dCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuYnV0dG9uID0gZnVuY3Rpb24gKGNvbnRleHQpIHtcbiAgICAgICAgICAgIHNldEhvb2tzKGNvbnRleHQpO1xuICAgICAgICAgICAgcmV0dXJuIGJ1dHRvbihjb250ZXh0KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5wID0gZnVuY3Rpb24gKGNvbnRleHQsIC4uLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICBzZXRIb29rcyhjb250ZXh0KTtcbiAgICAgICAgICAgIHJldHVybiBwKGNvbnRleHQsIC4uLmNoaWxkcmVuKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5sYWJlbCA9IGZ1bmN0aW9uIChjb250ZXh0LCAuLi5jaGlsZHJlbikge1xuICAgICAgICAgICAgc2V0SG9va3MoY29udGV4dCk7XG4gICAgICAgICAgICByZXR1cm4gbGFiZWwoY29udGV4dCwgLi4uY2hpbGRyZW4pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmEgPSBmdW5jdGlvbiAoY29udGV4dCwgLi4uY2hpbGRyZW4pIHtcbiAgICAgICAgICAgIHNldEhvb2tzKGNvbnRleHQpO1xuICAgICAgICAgICAgcmV0dXJuIGEoY29udGV4dCwgLi4uY2hpbGRyZW4pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmlmcmFtZSA9IGZ1bmN0aW9uIChjb250ZXh0LCAuLi5jaGlsZHJlbikge1xuICAgICAgICAgICAgc2V0SG9va3MoY29udGV4dCk7XG4gICAgICAgICAgICByZXR1cm4gaWZyYW1lKGNvbnRleHQsIC4uLmNoaWxkcmVuKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLm1vdW50ID0gdGhpcy5tb3VudC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmNvbXBvbmVudCA9IHRoaXMuY29tcG9uZW50LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMudXBkYXRlID0gdGhpcy51cGRhdGUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5lcnJvciA9IHRoaXMuZXJyb3IuYmluZCh0aGlzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50XG4gICAgICogQHBhcmFtIHsuLi5Db21wb25lbnR9IGNoaWxkcmVuIFxuICAgICAqIEByZXR1cm5zIHtDb21wb25lbnR9XG4gICAgICovXG4gICAgbW91bnQoZWxlbWVudCwgLi4uY2hpbGRyZW4pIHtcbiAgICAgICAgaWYgKHRoaXMuX19tb3VudGVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjb250ZXh0IGlzIGFscmVhZHkgbW91bnRlZFwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9fZWxlbWVudCA9IGNvbXBvbmVudChlbGVtZW50LCB7fSwgLi4uY2hpbGRyZW4pO1xuXG4gICAgICAgIHRoaXMuX19tb3VudGVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy51cGRhdGUoKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5fX2VsZW1lbnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7Q29tcG9uZW50fSBlbGVtZW50XG4gICAgICogQHJldHVybnMge0NvbXBvbmVudH1cbiAgICAgKi9cbiAgICBjb21wb25lbnQoZWxlbWVudCkge1xuICAgICAgICBpZiAoIXRoaXMuX19tb3VudGVkKSB7XG4gICAgICAgICAgICBsZXQgZWxlbWVudFVwZGF0ZSA9IGVsZW1lbnQudXBkYXRlO1xuXG4gICAgICAgICAgICBlbGVtZW50LnVwZGF0ZSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX19tb3VudGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX19tb3VudGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBlbGVtZW50LnVwZGF0ZSA9IGVsZW1lbnRVcGRhdGU7XG4gICAgICAgICAgICAgICAgZWxlbWVudC51cGRhdGUoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5fX2VsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgfVxuXG4gICAgdXBkYXRlKCkge1xuICAgICAgICBsZXQgc3RhcnQgPSBEYXRlLm5vdygpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5fX2VsZW1lbnQudXBkYXRlKCk7XG5cbiAgICAgICAgICAgIHRoaXMuX19zaWJsaW5nQXBwQ29udGV4dHMuZm9yRWFjaChjID0+IHtcbiAgICAgICAgICAgICAgICBjLnVwZGF0ZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRoaXMuZXJyb3IoZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS5sb2coXCJ1cGRhdGUgdGltZVwiLCBEYXRlLm5vdygpIC0gc3RhcnQpO1xuICAgIH1cbiAgICBlcnJvcihlKSB7XG4gICAgICAgIGlmIChlLmNvbXBvbmVudFN0YWNrKVxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlLCBlLmNvbXBvbmVudFN0YWNrKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICB9XG59XG5cbi8qKlxuICogXG4gKiBAcGFyYW0ge0NvbnRleHR9IGh0bWxqcyBcbiAqIEBwYXJhbSB7Q29udGV4dH0gcGFyZW50SHRtbGpzXG4gKiBAcmV0dXJucyB7Q29udGV4dH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZUh0bWxqcyhodG1sanMsIHBhcmVudEh0bWxqcykge1xuICAgIHJldHVybiB7XG4gICAgICAgIC4uLihwYXJlbnRIdG1sanMgfHwgaHRtbGpzKSxcblxuICAgICAgICBjb21wb25lbnQ6IGh0bWxqcy5jb21wb25lbnQsXG4gICAgICAgIGRhdGE6IGh0bWxqc1xuICAgIH07XG59XG5cbi8qKlxuICogXG4gKiBAcGFyYW0ge0NvbnRleHR9IGh0bWxqcyBcbiAqIEBwYXJhbSB7Q29udGV4dH0gcGFyZW50SHRtbGpzIFxuICogQHBhcmFtIHsoaHRtbGpzOiBDb250ZXh0KSA9PiAoY29udGV4dCkgPT4gQ29tcG9uZW50fSB1c2VDb21wb25lbnQgXG4gKiBAcmV0dXJucyB7KGNvbnRleHQpID0+IENvbXBvbmVudH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZUNvbXBvbmVudChodG1sanMsIHBhcmVudEh0bWxqcywgdXNlQ29tcG9uZW50KSB7XG4gICAgcmV0dXJuIHVzZUNvbXBvbmVudCh7XG4gICAgICAgIC4uLihwYXJlbnRIdG1sanMgfHwgaHRtbGpzKSxcblxuICAgICAgICBjb21wb25lbnQ6IGh0bWxqcy5jb21wb25lbnRcbiAgICB9KTtcbn0iLCJpbXBvcnQgeyBDb250ZXh0LCBwb29sTGlzdCwgc3dpdGNoQ29tcG9uZW50LCBwb29sU3dpdGNoIH0gZnJvbSBcIi4uLy4uL2luZGV4XCI7XG5pbXBvcnQgeyB1c2VBdXRoQ29tcG9uZW50IH0gZnJvbSBcIi4vd2l0aENvbnRleHQvYXV0aFwiO1xuaW1wb3J0IHVzZVRpbWVyQ29tcG9uZW50IGZyb20gXCIuL3dpdGhDb250ZXh0L3RpbWVyQ29tcG9uZW50XCI7XG5pbXBvcnQgdXNlUGFnZSBmcm9tIFwiLi93aXRoQ29udGV4dC9wYWdlXCI7XG5pbXBvcnQgdXNlU2xvd0NvbXBvbmVudCBmcm9tIFwiLi93aXRoQ29udGV4dC9zbG93XCI7XG5cblxubGV0IGh0bWxqcyA9IG5ldyBDb250ZXh0KCk7XG5sZXQgeyBtb3VudCwgZGl2LCBidXR0b24sIHNlbGVjdCwgc3BhbiwgaW5wdXRUZXh0IH0gPSBodG1sanM7XG5cbmxldCBhcHBEYXRhID0ge1xuICAgIHNob3c6IGZhbHNlLFxuICAgIGxpc3REYXRhOiBbXVxufTtcblxubGV0IHRpbWVyQ29tcG9uZW50ID0gdXNlVGltZXJDb21wb25lbnQoaHRtbGpzKTtcbmxldCBwYWdlID0gdXNlUGFnZShodG1sanMpO1xubGV0IHNsb3dDb21wb25lbnQgPSB1c2VTbG93Q29tcG9uZW50KGh0bWxqcyk7XG5sZXQgc3RhcnQgPSBEYXRlLm5vdygpO1xubW91bnQoZG9jdW1lbnQuYm9keSxcbiAgICBwYWdlKHtcbiAgICAgICAgc2lnbmVkSW46IGZhbHNlLFxuICAgICAgICBhdXRoQ29tcG9uZW50OiB1c2VBdXRoQ29tcG9uZW50KGh0bWxqcylcbiAgICB9KSxcbiAgICB0aW1lckNvbXBvbmVudCh7XG4gICAgICAgIHRpdGxlOiBcInN0YXRpYyB0aW1lclwiXG4gICAgfSksXG4gICAgc2xvd0NvbXBvbmVudCh7fSksXG4gICAgKCkgPT4ge1xuICAgICAgICBsZXQgdGltZXJzID0gW107XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGlucHV0VGl0bGUgPSBcIlwiO1xuICAgICAgICAgICAgICAgIGxldCBpbnB1dEVycm9yID0gXCJcIjtcbiAgICAgICAgICAgICAgICBsZXQgdGltZXJUaXRsZUlucHV0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGl2KHtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IFwiZGlzcGxheTogZmxleDsgZmxleC1mbG93OiByb3cgd3JhcDsgd2lkdGg6IDQ4MHB4XCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBkaXYoe1xuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IFwiZGlzcGxheTogZmxleDsgZmxleC1mbG93OiBjb2x1bW4gd3JhcDsgd2lkdGg6IDMyMHB4XCJcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVyVGl0bGVJbnB1dCA9IGlucHV0VGV4dCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xlcjogXCJ0aXRsZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiAoKSA9PiBpbnB1dEVycm9yID8gXCJjb2xvcjogcmVkOyBib3JkZXItY29sb3I6IHJlZDtcIiA6IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICgpID0+IGlucHV0VGl0bGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25rZXl1cDogKGUpID0+IHsgaW5wdXRUaXRsZSA9IGUudGFyZ2V0LnZhbHVlOyBpbnB1dEVycm9yID0gXCJcIjsgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2hDb21wb25lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmU6ICgpID0+IGlucHV0RXJyb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvbmVudDogKCkgPT4gc3Bhbih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZTogXCJjb2xvcjogcmVkO1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5uZXJUZXh0OiAoKSA9PiBpbnB1dEVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBidXR0b24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5uZXJUZXh0OiBcImFkZCB0aW1lclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25jbGljazogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dFRpdGxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVycy5wdXNoKHsgdGl0bGU6IGlucHV0VGl0bGUgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0VGl0bGUgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0RXJyb3IgPSBcImVudGVyIHRpdGxlIVwiXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy90aW1lclRpdGxlSW5wdXQuZWxlbWVudC5zY3JvbGxJbnRvVmlldygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGl2KHtcbiAgICAgICAgICAgICAgICBzdHlsZTogXCJkaXNwbGF5OiBmbGV4OyBoZWlnaHQ6IDMwMHB4OyBmbGV4LWZsb3c6IGNvbHVtbiB3cmFwOyBcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBwb29sTGlzdCh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHRpbWVycyxcbiAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50OiAocG9vbCkgPT4gZGl2KHt9LFxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZXJDb21wb25lbnQocG9vbCksXG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlubmVyVGV4dDogXCJkZWxldGVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmNsaWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVycy5zcGxpY2UoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lcnMuaW5kZXhPZihwb29sLl9fY29udGV4dCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApXG4gICAgICAgIF1cbiAgICB9LFxuICAgIHNlbGVjdCh7XG4gICAgICAgIG9wdGlvbnM6IFt7IHRleHQ6IFwiYWJjXCIsIHZhbHVlOiBcIjFcIiB9LCB7IHRleHQ6IFwicXdlclwiLCB2YWx1ZTogXCIyXCIgfV0sXG4gICAgICAgIHZhbHVlOiBcIjFcIixcbiAgICAgICAgb25jaGFuZ2U6ICgpID0+IHsgfVxuICAgIH0pLFxuICAgIHBvb2xMaXN0KHtcbiAgICAgICAgZGF0YTogYXBwRGF0YS5saXN0RGF0YSxcbiAgICAgICAgY29tcG9uZW50OiAoY29udGV4dCkgPT4gW1xuICAgICAgICAgICAgZGl2KHt9LCBbXG4gICAgICAgICAgICAgICAgc3Bhbih7XG4gICAgICAgICAgICAgICAgICAgIGlubmVyVGV4dDogXCJvbmxpbmVcIixcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IFwiY29sb3I6IGdyZWVuXCJcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBidXR0b24oe1xuICAgICAgICAgICAgICAgICAgICBpbm5lclRleHQ6ICgpID0+IGBtZWV0ICR7Y29udGV4dC5pZH1gLFxuICAgICAgICAgICAgICAgICAgICBvbmNsaWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0Lm1lZXRlZCA9IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHBvb2xTd2l0Y2goXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZTogKCkgPT4gY29udGV4dC5tZWV0ZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ6ICgpID0+IGRpdih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IFwiYm9yZGVyOiBzb2xpZCAxcHggcmVkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5uZXJUZXh0OiAoKSA9PiBgSGV5ISBJJ20gYSBtb2RlbCAke2NvbnRleHQuaWR9YFxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIF1cbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBwb29sU3dpdGNoKHsgYWN0aXZlOiAoKSA9PiAhY29udGV4dC5tZWV0ZWQsIGNvbXBvbmVudDogKCkgPT4gZGl2KHsgaW5uZXJUZXh0OiBcIm1lZXQgbWUhXCIgfSkgfSlcbiAgICAgICAgXSxcblxuICAgIH0pLFxuICAgIGJ1dHRvbih7XG4gICAgICAgIGlubmVyVGV4dDogXCJtYWdpYyFcIixcbiAgICAgICAgb25jbGljazogKCkgPT4ge1xuICAgICAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPiAuNSkge1xuICAgICAgICAgICAgICAgIGxldCBpbmRleCA9IE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIGFwcERhdGEubGlzdERhdGEubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBhcHBEYXRhLmxpc3REYXRhLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhcHBEYXRhLmxpc3REYXRhLnNwbGljZShNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiBhcHBEYXRhLmxpc3REYXRhLmxlbmd0aCksIDAsXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiA1MCksXG4gICAgICAgICAgICAgICAgICAgICAgICBtZWV0ZWQ6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSlcbik7XG5cbmNvbnNvbGUubG9nKERhdGUubm93KCkgLSBzdGFydCk7IiwiaW1wb3J0IHsgQ29udGV4dCwgdmFsLCBzd2l0Y2hDb21wb25lbnQsIENvbXBvbmVudCwgYm9keSwgdXNlSHRtbGpzIH0gZnJvbSBcIi4uLy4uLy4uXCI7XG5cbi8qKlxuICogXG4gKiBAcGFyYW0ge0NvbnRleHR9IGh0bWxqcyBcbiAqIEBwYXJhbSB7Q29udGV4dH0gcGFyZW50SHRtbGpzXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlVGltZXJDb21wb25lbnQoaHRtbGpzLCBwYXJlbnRIdG1sanMpIHtcbiAgICBsZXQgeyBjb21wb25lbnQsIGRpdiwgc3BhbiwgYnV0dG9uIH0gPSB1c2VIdG1sanMoaHRtbGpzLCBwYXJlbnRIdG1sanMpO1xuXG4gICAgY2xhc3MgVGltZXJDb21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgICAgICBjb25zdHJ1Y3Rvcihjb250ZXh0KSB7XG4gICAgICAgICAgICBzdXBlcihudWxsLCBjb250ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29tcG9uZW50KCkge1xuICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICBzcGFuKHsgaW5uZXJUZXh0OiAoKSA9PiB0aGlzLmNvbnRleHQudGl0bGUgKyBcIiBcIiB9KSxcbiAgICAgICAgICAgICAgICBzcGFuKHsgaW5uZXJUZXh0OiAoKSA9PiB0aGlzLnN0YXJ0VGltZSAmJiAoKHRoaXMuc3RvcFRpbWUgfHwgRGF0ZS5ub3coKSkgLSB0aGlzLnN0YXJ0VGltZSkgLyAxMDAwIH0pLFxuICAgICAgICAgICAgICAgIHN3aXRjaENvbXBvbmVudChcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlOiAoKSA9PiAhdGhpcy5zdGFydGVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50OiAoKSA9PiBidXR0b24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlubmVyVGV4dDogXCJzdGFydFwiLCBvbmNsaWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdG9wVGltZSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAzMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlOiAoKSA9PiB0aGlzLnN0YXJ0ZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ6ICgpID0+IGJ1dHRvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5uZXJUZXh0OiBcInN0b3BcIiwgb25jbGljazogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnRlcnZhbCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RvcFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdha2UoKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuaW50ZXJ2YWwgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5zdGFydFRpbWUgPSAwO1xuICAgICAgICAgICAgdGhpcy5zdG9wVGltZSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgc3RvcCgpIHtcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIChjb250ZXh0KSA9PiBjb21wb25lbnQobmV3IFRpbWVyQ29tcG9uZW50KGNvbnRleHQpKTtcbn0iLCJpbXBvcnQgeyB1c2VIdG1sanMsIHZhbCwgc3dpdGNoQ29tcG9uZW50IH0gZnJvbSBcIi4uLy4uLy4uXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHVzZVBhZ2UoaHRtbGpzLCBwYXJlbnRIdG1sanMpIHtcbiAgICBsZXQgeyBjb21wb25lbnQsIGRpdiwgYnV0dG9uIH0gPSB1c2VIdG1sanMoaHRtbGpzLCBwYXJlbnRIdG1sanMpO1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChjb250ZXh0KSB7XG4gICAgICAgIHJldHVybiBjb21wb25lbnQoZGl2KHt9LFxuICAgICAgICAgICAgc3dpdGNoQ29tcG9uZW50KFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlOiAoKSA9PiAhdmFsKGNvbnRleHQuc2lnbmVkSW4pLFxuICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ6ICgpID0+IGNvbnRleHQuYXV0aENvbXBvbmVudChjb250ZXh0KVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBhY3RpdmU6ICgpID0+IHZhbChjb250ZXh0LnNpZ25lZEluKSxcbiAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50OiAoKSA9PiBkaXYoe30sIGJ1dHRvbih7IGlubmVyVGV4dDogXCJzaWduZWQgaW4hXCIgfSkpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKVxuICAgICAgICApKTtcbiAgICB9XG59IiwiaW1wb3J0IHsgdXNlSHRtbGpzLCBDb21wb25lbnQsIGxpc3QgfSBmcm9tIFwiLi4vLi4vLi5cIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlU2xvd0NvbXBvbmVudChjb250ZXh0LCBwYXJlbnRDb250ZXh0KSB7XG4gICAgbGV0IHsgY29tcG9uZW50LCBkaXYsIHNwYW4gfSA9IHVzZUh0bWxqcyhjb250ZXh0LCBwYXJlbnRDb250ZXh0KTtcblxuICAgIGNsYXNzIFNsb3dDb21wb25lbnQgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgICAgICBjb25zdHJ1Y3Rvcihjb250ZXh0KSB7XG4gICAgICAgICAgICBzdXBlcihudWxsLCBjb250ZXh0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbXBvbmVudCgpIHtcbiAgICAgICAgICAgIHJldHVybiBkaXYoe1xuICAgICAgICAgICAgICAgIHN0eWxlOiAoKSA9PiB0aGlzLmxvYWRlZCA/IFwiYm9yZGVyOiBzb2xpZCAycHggZ3JlZW47IHBhZGRpbmc6IDEycHg7IGNvbG9yOiBncmVlbjtcIiA6IFwiYm9yZGVyOiBzb2xpZCAycHggcmVkOyBwYWRkaW5nOiAxMnB4OyBjb2xvcjogcmVkXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHNwYW4oe1xuICAgICAgICAgICAgICAgICAgICBpbm5lclRleHQ6ICgpID0+IHRoaXMubG9hZGVkID8gXCJSZWFkeSB0byB3b3JrIVwiIDogXCJMb2FkaW5nLi4uXCJcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBkaXYoe1xuICAgICAgICAgICAgICAgICAgICBpbm5lclRleHQ6ICgpID0+IHRoaXMubG9hZGVkID8gXCJNZSB0b28hXCIgOiBcIldhaXRpbmcgdG9vLi4uXCJcbiAgICAgICAgICAgICAgICB9KSxcblxuICAgICAgICAgICAgICAgIGRpdih7fSxcbiAgICAgICAgICAgICAgICAgICAgbGlzdCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBbXCIxXCIsIFwiMlwiLCBcIjNcIl0sXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQ6IChkYXRhKSA9PiBkaXYoeyBpbm5lclRleHQ6ICgpID0+IGRhdGEgfSlcbiAgICAgICAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGF3YWtlKCkge1xuICAgICAgICAgICAgdGhpcy5sb2FkZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBhc3luYyBzdGFydCgpIHtcbiAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChyZXNvbHZlLCAzMDAwKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLmxvYWRlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gKGNvbnRleHQpID0+IGNvbXBvbmVudChuZXcgU2xvd0NvbXBvbmVudChjb250ZXh0KSk7XG59IiwiaW1wb3J0IHsgQ29udGV4dCB9IGZyb20gXCIuLi8uLi8uLlwiO1xuXG4vKipcbiAqIFxuICogQHBhcmFtIHsgQ29udGV4dCB9IGNvbnRleHQgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VBdXRoQ29tcG9uZW50KGNvbnRleHQpIHtcbiAgICBsZXQgeyBkaXYsIGJ1dHRvbiwgaW5wdXRUZXh0IH0gPSBjb250ZXh0O1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChjb250ZXh0KSB7XG4gICAgICAgIHJldHVybiBkaXYoe30sXG4gICAgICAgICAgICBpbnB1dFRleHQoe1xuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBcImxvZ2luXCJcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgYnV0dG9uKHtcbiAgICAgICAgICAgICAgICBpbm5lclRleHQ6IFwic2lnbiBpblwiLFxuICAgICAgICAgICAgICAgIG9uY2xpY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5zaWduZWRJbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICB9XG59Il0sInNvdXJjZVJvb3QiOiIifQ==